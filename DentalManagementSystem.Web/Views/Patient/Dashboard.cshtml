@using DentalManagementSystem.Web.ViewModels.Appointment
@model IEnumerable<AppointmentDetailsViewModel>

@{
    ViewBag.Title = "Dashboard";
}

<h1 class="mb-4">Dashboard</h1>
<h2 class="mb-4">Your Appointments History</h2>

@if (Model.Any())
{
    @foreach (var appointment in Model)
    {
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Appointment on @appointment.AppointmentDate</h4>
            </div>
            <div class="card-body">
                <p><strong>Dentist:</strong> Dr. @appointment.DentistName</p>
                <h5>Procedures:</h5>
                @if (appointment.Procedures.Any())
                {
                    <ul class="list-group">
                        @foreach (var procedure in appointment.Procedures)
                        {
                            <li class="list-group-item">
                                <strong>@procedure.Name</strong><br />
                                <small>Price: @procedure.Price</small><br />
                                <small>Description: @procedure.Description</small>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class ="text-muted">No procedures assigned to this appointment.</p>
                }
            </div>
        </div>
    }
}
else
{
    <div class="alert alert-warning">
        <p>No appointments found.</p>
    </div>
}
